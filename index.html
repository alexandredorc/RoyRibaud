<!DOCTYPE html>
<html>
<head>
    <title>Multiplayer Game Server</title>
    <script>
        // Initialize game state in localStorage if not already present
        if (!localStorage.getItem('gameState')) {
            localStorage.setItem('gameState', JSON.stringify({
                host: "",
                client: "",
                messageFromHost: "",
                messageFromClient: ""
            }));
        }

        // Handle incoming requests
        function handleRequest() {
            const urlParams = new URLSearchParams(window.location.search);
            const method = urlParams.get('method');

            if (method === 'POST') {
                const role = urlParams.get('role');
                const message = urlParams.get('message');
                updateGameState(role, message);
            } else if (method === 'GET') {
                displayGameState();
            }
        }

        // Update game state in localStorage
        function updateGameState(role, message) {
            let gameState = JSON.parse(localStorage.getItem('gameState'));

            if (role === 'host') {
                gameState.messageFromHost = message;
            } else if (role === 'client') {
                gameState.messageFromClient = message;
            }

            localStorage.setItem('gameState', JSON.stringify(gameState));
            displayGameState();
        }

        // Display current game state
        function displayGameState() {
            let gameState = JSON.parse(localStorage.getItem('gameState'));
            document.getElementById('game-state').textContent = JSON.stringify(gameState, null, 2);
        }

        window.onload = handleRequest;
    </script>
</head>
<body>
    <h1>Multiplayer Game Server</h1>
    <pre id="game-state"></pre>
</body>
</html>
